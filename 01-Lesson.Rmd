# Getting Started

**"Any fool can write code that a computer can understand. Good programmers write code that humans can understand."** --- Martin Fowler

We will use RStudio Cloud (https://rstudio.cloud/) throughout the semester.

![RStudio Cloud's landing page](figures/RStudioCloudLanding.png)

If you prefer to work with R and RStudio on your own computer (without RStudio Cloud) then

First get R

* Point browser to http://www.r-project.org.
* Select the CRAN (Comprehensive R Archive Network). Scroll to a mirror site. 
* Choose the appropriate file for your hardware.
* Follow the instructions to install R.

Then get RStudio

* Click on http://rstudio.org
* Download RStudio Desktop
* Install and open RStudio

## RStudio's integrated development environment (IDE)

* Written in HTML
* Top menus
  + File > New File > R Markdown
  + Tools > Global Options > Appearance
  
* Upper left panel is the markdown file. This is where we add text and code. 

  + Run code chunks from this panel 
  + Output from the operations can be placed in this panel or in the Console (see the gear icon above)
  + All the text, code, and output can be rendered to an HTML file or a PDF or Word document (see the Knit button above)
  
* Upper right panel shows what is in your current environment and the history of the commands you issued.

  + This is also where you can connect to github
  
* Lower left panel is the Console

  + I think of this as a sandbox where you try out small bits of code. If it works and is relevant move it to the markdown file.
  + This is also where output from running code will be placed.
  + Not a place for plain text
  
* Lower right panel shows your project files, the plots that get made, and all the packages associated with the project.

  + The File tab shows the files in the project. The most important one is the .Rmd.
  + The Plot tab currently shows a blank sheet
  + The Packages tab shows all the packages that have been downloaded from CRAN and are associated with this project.

## Create an HTML file

Your assignments and class project will be done in an Rmd file.

1. Click on the Assignment project.
2. Open the corresponding assignment Rmd file.
3. Replace 'Your Name' with your name.
4. Answer the questions by typing the code between code-chunk delimiters.
5. Select the Knit button to generate the HTML.
6. If there are errors, fix them and re-knit. 

## Basic R

Applied statistics is the analysis and modeling of data. The `c()` function gets small lists of data items into R. The function combines (concatenates) items. Consider for example a set of hypothetical annual land falling hurricane counts over a ten-year period.

2  3  0  3  1  0  0  1  2  1

We put these count values into our working directory by typing them into the console as follows. The console is the lower left window.
```{r}
counts <- c(2, 3, 0, 3, 1, 0, 0, 1, 2, 1)
counts
```

We assign the values to an object called `counts`. The assignment operator is an equal sign (`<-` or `=`).  Values do not print. They are assigned to an object name. They are printed by typing the object name as we did on the second line. When printed the values are prefaced with a `[1]`. This indicates that the object is a vector and the first entry in the vector has a value of 2 (The number immediately to the right of `[1]`).

Note: We can assign and print by wrapping the entire line of code in parantheses.
```{r}
( counts <- c(2, 3, 0, 3, 1, 0, 0, 1, 2, 1) )
```

Note: we use the arrow keys to retrieve previous commands. Each command is stored in the history file. The up-arrow key moves backwards through the history file. The left and right arrow keys move the cursor along the line.
 
### Functions

We apply functions to data that are stored in objects. For example:
```{r}
sum(counts)
length(counts)
sum(counts)/length(counts)
mean(counts)
```

The function `sum()` totals the hurricane counts over all years, `length()` returns the number of elements in the vector. Other functions include, `sort()`, `min()`, `max()`, `range()`, `diff()`, and `cumsum()`. Try these functions on the landfall counts. What does the function `range()` return?  What does the function `diff()` do?

### Data vectors

The hurricane count data stored in the object `counts` is a vector. This means that R keeps track of the order that the data were entered. There is a first element, a second element, and so on. This is good for several reasons.

The vector of counts has a natural order; year 1, year 2, etc. We don't want to mix these. We would like to be able to make changes to the data item by item instead of entering the values again. Also, vectors are math objects so that math operations can be performed on them.

For example, suppose `counts` contain the annual landfall count from the first decade of a longer record.  We want to keep track of counts over other decades. This could be done by the following, example.
```{r}
d1 <- counts
d2 <- c(0, 5, 4, 2, 3, 0, 3, 3, 2, 1)
```

Most functions operate on each element of the data vector at the same time.
```{r}
d1 + d2
```

The first year of the first decade is added from the first year of the second decade and so on.

What happens if we apply the `c()` function to these two vectors?  Try it.
```{r}
c(d1, d2)
```

If we are interested in each year's count as a difference from the decade mean, we type:
```{r}
d1 - mean(d1)
```

In this case a single number (the mean of the first decade) is subtracted from a vector. The result is from subtracting the number from each entry in the data vector. This is an example of data recycling. R repeats values from one vector so that the vector lengths match. Here the mean is repeated 10 times.

#### Variance

Suppose we are interested in the variance of the set of landfall counts. The variance is computed as
$$
\hbox{var}(x) = \frac{(x_1 - \bar x)^2 + (x_2 - \bar x)^2 + \cdots + (x_n - \bar x)^2}{n-1} = \frac{1}{n-1}\sum_{i=1}^n (x_i - \bar x)^2
$$

Although the `var()` function computes this, here we see how to do this using simpler functions. The key is to find the squared differences and then sum.
```{r}
x <- d1
xbar <- mean(x)
x - xbar
(x - xbar)^2
sum((x - xbar)^2)
n <- length(x)
n
sum((x - xbar)^2)/(n - 1)
var(x)
```

### Vector types

Elements in a vector must all have the same type. This type can be numeric, as in counts, character strings, as in
```{r}
simpsons <- c('Homer', 'Marge', 'Bart', 'Lisa', 'Maggie')
simpsons
```

Character strings are made with matching quotes, either double, `"`, or single, `'`. If we mix types the values will be coerced into a common type, which is usually a character string. Arithmetic operations do not work on character strings.

Returning to the land falling hurricane counts. Now suppose the National Hurricane Center (NHC) reanalyzes a storm, and that the 6th year of the 2nd decade is a 1 rather than a 0 for the number of landfalls. In this case we type:
```{r}
d2[6] <- 1
```

This assigns to the 6th year of the decade a value of one. The assignment to the 6th entry in the vector `d2` is done by referencing the entry with square brackets `[]`. 

Keep this straight: Parentheses `()` are used for functions and square brackets `[]` are used to extract values from vectors (and arrays, lists, etc).
```{r}
d2
d2[2]
d2[-4]
d2[c(1, 3, 5, 7, 9)]
```

The first line prints all the values of the vector `df2`. The second prints only the 2nd value of the vector. The third prints all but the 4th value. The fourth prints the values with odd element numbers.

### Structured data

Sometimes we need to create structured data. For example, the integers 1 through 99. To enter these we use the `:` operator.
```{r, eval=FALSE}
1:99
rev(1:99)
99:1
```

The `seq()` function is more general than `:`. We specify the sequence interval with the `by =` or `length =` arguments.
```{r}
seq(from = 1, to = 9, by = 2)
seq(1, 10, by = 2)
seq(1, 9, length = 5)
```

The `rep()` function is to create repetitive sequences. The first argument is a value or vector that we want repeated and the second argument is the number of times we want it repeated.
```{r}
rep(1, times = 10)
rep(simpsons, times = 2)
```

In the second example the vector `simpsons` containing the Simpson characters is repeated twice.

To repeat each element of the vector use the `each =` argument.
```{r}
rep(simpsons, each = 2)
```

More complicated patterns can be repeated by specifying pairs of equal-sized vectors. In this case, each element of the first vector is repeated the corresponding number of times specified by the element in the second vector.
```{r}
rep(c("long", "short"), c(2, 3))
```

### Query data

To find the maximum number of landfalls in the first decade we type.
```{r}
max(d1)
```

Which years had the maximum?
```{r}
d1 == 3
```

Notice the double equals signs (`==`).  This tests each value in `d1` to see if it is equal to 3. The 2nd and 4th values are equal to 3 so `TRUE`s are returned. Think of this as asking R a question. Is the value equal to 3?  R answers all at once with a vector of `TRUE`'s and `FALSE`'s.

Now the question is -- how do you get the vector element corresponding to the `TRUE` values?  That is, which years have 3 landfalls?
```{r}
which(d1 == 3)
```

The function `which.max()` can be used to get the first maximum.
```{r}
which.max(d1)
```

We might also want to know the total number of landfalls in each decade and the number of years in a decade without a landfall. Or how about the ratio of the mean number of landfalls over the two decades.
```{r}
sum(d1)
sum(d2)
sum(d1 == 0)
sum(d2 == 0)
mean(d2)/mean(d1)
```

So there is 85% more landfalls during the second decade. Is this difference statistically significant?

To remove an object from the environment use the `rm()` function.
```{r}
rm(d1, d2)
```

## Need additional help? Try swirl

The package **swirl** contains functions to help you learn the basics of R. The `install.packages()` function gets the package from an CRAN mirror site. This needs to be done only once to your local computer. You can update packages using `update.packages()`. To make the functions work in your current session you must use the `library()` function. This needs to be done for every session, but only once per session.
```{r, eval=FALSE}
install.packages("swirl")
library(swirl)
```

Type:
```{r, eval=FALSE}
swirl()
```

Choose the lesson: R Programming. Work through lessons 1:8

Getting help: https://www.r-project.org/help.html
